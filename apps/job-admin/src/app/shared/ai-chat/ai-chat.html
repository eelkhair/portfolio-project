<!-- Floating button -->
<button
  class="chat-fab"
  (click)="toggle()"
  [class.chat-fab-open]="isOpen()">
  @if (isOpen()) {
    <i class="pi pi-times"></i>
  } @else {
    <i class="pi pi-sparkles"></i>
  }
</button>

<!-- Chat window -->
@if (isOpen()) {
  <div class="chat-window">
    <div class="chat-header">
      <i class="pi pi-sparkles"></i>
      <span>AI Assistant</span>
    </div>

    <div class="chat-messages">
      @for (msg of messages(); track $index) {
        <div class="chat-message" [class.user]="msg.role === 'user'" [class.assistant]="msg.role === 'assistant'">
          <div class="message-content">{{ msg.content }}</div>
        </div>
      }
    </div>

    <div class="chat-input">
      <input
        pInputText
        [(ngModel)]="message"
        placeholder="Type a message..."
        (keydown)="onKeydown($event)"
        class="w-full" />
      <p-button
        icon="pi pi-send"
        (onClick)="send()"
        [disabled]="!message.trim()">
      </p-button>
    </div>
  </div>
}
